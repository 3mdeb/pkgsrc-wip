# $NetBSD$

PKGNAME=	gopass-1.9.2
DISTNAME=	gopass-${GITHUB_TAG}
CATEGORIES=	security
MASTER_SITES=	${MASTER_SITE_GITHUB:=gopasspw/}
GITHUB_PROJECT=	gopass
GITHUB_TAG=	v${PKGVERSION_NOREV}

MAINTAINER=	iku.iwasa@gmail.com
HOMEPAGE=	https://www.gopass.pw/
COMMENT=	The slightly more awesome Standard Unix Password Manager for Teams
LICENSE=	mit

EXTRACT_USING=	bsdtar

GO_MODULE_FILES+=	github.com/!burnt!sushi/toml/@v/v0.3.1.mod
GO_MODULE_FILES+=	github.com/!burnt!sushi/toml/@v/v0.3.1.zip
GO_MODULE_FILES+=	github.com/!d!a!t!a-!d!o!g/go-sqlmock/@v/v1.3.3.mod
GO_MODULE_FILES+=	github.com/!d!a!t!a-!d!o!g/go-sqlmock/@v/v1.3.3.zip
GO_MODULE_FILES+=	github.com/!proton!mail/go-appdir/@v/v1.1.0.mod
GO_MODULE_FILES+=	github.com/!proton!mail/go-appdir/@v/v1.1.0.zip
GO_MODULE_FILES+=	github.com/alecthomas/binary/@v/v0.0.0-20190922233330-fb1b1d9c299c.mod
GO_MODULE_FILES+=	github.com/alecthomas/binary/@v/v0.0.0-20190922233330-fb1b1d9c299c.zip
GO_MODULE_FILES+=	github.com/atotto/clipboard/@v/v0.1.2.mod
GO_MODULE_FILES+=	github.com/atotto/clipboard/@v/v0.1.2.zip
GO_MODULE_FILES+=	github.com/blang/semver/@v/v0.0.0-20190414182527-1a9109f8c4a1.mod
GO_MODULE_FILES+=	github.com/blang/semver/@v/v0.0.0-20190414182527-1a9109f8c4a1.zip
GO_MODULE_FILES+=	github.com/cenkalti/backoff/@v/v2.2.1+incompatible.mod
GO_MODULE_FILES+=	github.com/cenkalti/backoff/@v/v2.2.1+incompatible.zip
GO_MODULE_FILES+=	github.com/cpuguy83/go-md2man/v2/@v/v2.0.0-20190314233015-f79a8a8ca69d.mod
GO_MODULE_FILES+=	github.com/cpuguy83/go-md2man/v2/@v/v2.0.0.mod
GO_MODULE_FILES+=	github.com/cpuguy83/go-md2man/v2/@v/v2.0.0.zip
GO_MODULE_FILES+=	github.com/creack/pty/@v/v1.1.9.mod
GO_MODULE_FILES+=	github.com/creack/pty/@v/v1.1.9.zip
GO_MODULE_FILES+=	github.com/davecgh/go-spew/@v/v1.1.0.mod
GO_MODULE_FILES+=	github.com/davecgh/go-spew/@v/v1.1.1.mod
GO_MODULE_FILES+=	github.com/davecgh/go-spew/@v/v1.1.1.zip
GO_MODULE_FILES+=	github.com/dominikschulz/github-releases/@v/v0.0.2.mod
GO_MODULE_FILES+=	github.com/dominikschulz/github-releases/@v/v0.0.2.zip
GO_MODULE_FILES+=	github.com/doronbehar/gocui/@v/v0.4.2.mod
GO_MODULE_FILES+=	github.com/doronbehar/gocui/@v/v0.4.2.zip
GO_MODULE_FILES+=	github.com/doronbehar/termbox-go/@v/v0.0.0-20191006141301-8c9470559e05.mod
GO_MODULE_FILES+=	github.com/doronbehar/termbox-go/@v/v0.0.0-20191006141301-8c9470559e05.zip
GO_MODULE_FILES+=	github.com/fatih/color/@v/v1.9.0.mod
GO_MODULE_FILES+=	github.com/fatih/color/@v/v1.9.0.zip
GO_MODULE_FILES+=	github.com/gdamore/encoding/@v/v1.0.0.mod
GO_MODULE_FILES+=	github.com/gdamore/encoding/@v/v1.0.0.zip
GO_MODULE_FILES+=	github.com/gdamore/tcell/@v/v1.3.0.mod
GO_MODULE_FILES+=	github.com/gdamore/tcell/@v/v1.3.0.zip
GO_MODULE_FILES+=	github.com/godbus/dbus/@v/v0.0.0-20190623212516-8a1682060722.mod
GO_MODULE_FILES+=	github.com/godbus/dbus/@v/v0.0.0-20190623212516-8a1682060722.zip
GO_MODULE_FILES+=	github.com/gokyle/twofactor/@v/v1.0.1.mod
GO_MODULE_FILES+=	github.com/gokyle/twofactor/@v/v1.0.1.zip
GO_MODULE_FILES+=	github.com/golang/protobuf/@v/v1.4.0-rc.1.0.20200221234624-67d41d38c208.mod
GO_MODULE_FILES+=	github.com/golang/protobuf/@v/v1.4.0-rc.1.mod
GO_MODULE_FILES+=	github.com/golang/protobuf/@v/v1.4.0-rc.2.mod
GO_MODULE_FILES+=	github.com/golang/protobuf/@v/v1.4.0-rc.4.0.20200313231945-b860323f09d0.mod
GO_MODULE_FILES+=	github.com/golang/protobuf/@v/v1.4.0.mod
GO_MODULE_FILES+=	github.com/golang/protobuf/@v/v1.4.0.zip
GO_MODULE_FILES+=	github.com/google/go-cmp/@v/v0.3.0.mod
GO_MODULE_FILES+=	github.com/google/go-cmp/@v/v0.3.1.mod
GO_MODULE_FILES+=	github.com/google/go-cmp/@v/v0.4.0.mod
GO_MODULE_FILES+=	github.com/google/go-cmp/@v/v0.4.0.zip
GO_MODULE_FILES+=	github.com/google/go-github/@v/v17.0.0+incompatible.mod
GO_MODULE_FILES+=	github.com/google/go-github/@v/v17.0.0+incompatible.zip
GO_MODULE_FILES+=	github.com/google/go-querystring/@v/v1.0.0.mod
GO_MODULE_FILES+=	github.com/google/go-querystring/@v/v1.0.0.zip
GO_MODULE_FILES+=	github.com/hashicorp/errwrap/@v/v1.0.0.mod
GO_MODULE_FILES+=	github.com/hashicorp/errwrap/@v/v1.0.0.zip
GO_MODULE_FILES+=	github.com/hashicorp/go-multierror/@v/v1.1.0.mod
GO_MODULE_FILES+=	github.com/hashicorp/go-multierror/@v/v1.1.0.zip
GO_MODULE_FILES+=	github.com/hashicorp/golang-lru/@v/v0.5.4.mod
GO_MODULE_FILES+=	github.com/hashicorp/golang-lru/@v/v0.5.4.zip
GO_MODULE_FILES+=	github.com/jsimonetti/pwscheme/@v/v0.0.0-20160922125227-76804708ecad.mod
GO_MODULE_FILES+=	github.com/jsimonetti/pwscheme/@v/v0.0.0-20160922125227-76804708ecad.zip
GO_MODULE_FILES+=	github.com/kballard/go-shellquote/@v/v0.0.0-20180428030007-95032a82bc51.mod
GO_MODULE_FILES+=	github.com/kballard/go-shellquote/@v/v0.0.0-20180428030007-95032a82bc51.zip
GO_MODULE_FILES+=	github.com/kr/pty/@v/v1.1.1.mod
GO_MODULE_FILES+=	github.com/kr/pty/@v/v1.1.1.zip
GO_MODULE_FILES+=	github.com/kr/text/@v/v0.1.0.mod
GO_MODULE_FILES+=	github.com/kr/text/@v/v0.2.0.mod
GO_MODULE_FILES+=	github.com/kr/text/@v/v0.2.0.zip
GO_MODULE_FILES+=	github.com/lucasb-eyer/go-colorful/@v/v1.0.2.mod
GO_MODULE_FILES+=	github.com/lucasb-eyer/go-colorful/@v/v1.0.3.mod
GO_MODULE_FILES+=	github.com/lucasb-eyer/go-colorful/@v/v1.0.3.zip
GO_MODULE_FILES+=	github.com/martinhoefling/goxkcdpwgen/@v/v0.0.0-20190331205820-7dc3d102eca3.mod
GO_MODULE_FILES+=	github.com/martinhoefling/goxkcdpwgen/@v/v0.0.0-20190331205820-7dc3d102eca3.zip
GO_MODULE_FILES+=	github.com/mattn/go-colorable/@v/v0.1.4.mod
GO_MODULE_FILES+=	github.com/mattn/go-colorable/@v/v0.1.6.mod
GO_MODULE_FILES+=	github.com/mattn/go-colorable/@v/v0.1.6.zip
GO_MODULE_FILES+=	github.com/mattn/go-isatty/@v/v0.0.11.mod
GO_MODULE_FILES+=	github.com/mattn/go-isatty/@v/v0.0.12.mod
GO_MODULE_FILES+=	github.com/mattn/go-isatty/@v/v0.0.12.zip
GO_MODULE_FILES+=	github.com/mattn/go-isatty/@v/v0.0.8.mod
GO_MODULE_FILES+=	github.com/mattn/go-runewidth/@v/v0.0.4.mod
GO_MODULE_FILES+=	github.com/mattn/go-runewidth/@v/v0.0.9.mod
GO_MODULE_FILES+=	github.com/mattn/go-runewidth/@v/v0.0.9.zip
GO_MODULE_FILES+=	github.com/mitchellh/go-homedir/@v/v1.1.0.mod
GO_MODULE_FILES+=	github.com/mitchellh/go-homedir/@v/v1.1.0.zip
GO_MODULE_FILES+=	github.com/mitchellh/go-ps/@v/v1.0.0.mod
GO_MODULE_FILES+=	github.com/mitchellh/go-ps/@v/v1.0.0.zip
GO_MODULE_FILES+=	github.com/muesli/crunchy/@v/v0.4.0.mod
GO_MODULE_FILES+=	github.com/muesli/crunchy/@v/v0.4.0.zip
GO_MODULE_FILES+=	github.com/muesli/goprogressbar/@v/v0.0.0-20190807022807-e540249d2ac1.mod
GO_MODULE_FILES+=	github.com/muesli/goprogressbar/@v/v0.0.0-20190807022807-e540249d2ac1.zip
GO_MODULE_FILES+=	github.com/niemeyer/pretty/@v/v0.0.0-20200227124842-a10e7caefd8e.mod
GO_MODULE_FILES+=	github.com/niemeyer/pretty/@v/v0.0.0-20200227124842-a10e7caefd8e.zip
GO_MODULE_FILES+=	github.com/pkg/errors/@v/v0.9.1.mod
GO_MODULE_FILES+=	github.com/pkg/errors/@v/v0.9.1.zip
GO_MODULE_FILES+=	github.com/pmezard/go-difflib/@v/v1.0.0.mod
GO_MODULE_FILES+=	github.com/pmezard/go-difflib/@v/v1.0.0.zip
GO_MODULE_FILES+=	github.com/russross/blackfriday/v2/@v/v2.0.1.mod
GO_MODULE_FILES+=	github.com/russross/blackfriday/v2/@v/v2.0.1.zip
GO_MODULE_FILES+=	github.com/schollz/closestmatch/@v/v0.0.0-20190308193919-1fbe626be92e.mod
GO_MODULE_FILES+=	github.com/schollz/closestmatch/@v/v0.0.0-20190308193919-1fbe626be92e.zip
GO_MODULE_FILES+=	github.com/shurcoo!l/sanitized_anchor_name/@v/v1.0.0.mod
GO_MODULE_FILES+=	github.com/shurcoo!l/sanitized_anchor_name/@v/v1.0.0.zip
GO_MODULE_FILES+=	github.com/skip2/go-qrcode/@v/v0.0.0-20191027152451-9434209cb086.mod
GO_MODULE_FILES+=	github.com/skip2/go-qrcode/@v/v0.0.0-20191027152451-9434209cb086.zip
GO_MODULE_FILES+=	github.com/stretchr/objx/@v/v0.1.0.mod
GO_MODULE_FILES+=	github.com/stretchr/objx/@v/v0.1.0.zip
GO_MODULE_FILES+=	github.com/stretchr/testify/@v/v1.5.1.mod
GO_MODULE_FILES+=	github.com/stretchr/testify/@v/v1.5.1.zip
GO_MODULE_FILES+=	github.com/urfave/cli/v2/@v/v2.2.0.mod
GO_MODULE_FILES+=	github.com/urfave/cli/v2/@v/v2.2.0.zip
GO_MODULE_FILES+=	github.com/xrash/smetrics/@v/v0.0.0-20170218160415-a3153f7040e9.mod
GO_MODULE_FILES+=	github.com/xrash/smetrics/@v/v0.0.0-20170218160415-a3153f7040e9.zip
GO_MODULE_FILES+=	golang.org/x/crypto/@v/v0.0.0-20190308221718-c2843e01d9a2.mod
GO_MODULE_FILES+=	golang.org/x/crypto/@v/v0.0.0-20190701094942-4def268fd1a4.mod
GO_MODULE_FILES+=	golang.org/x/crypto/@v/v0.0.0-20200423211502-4bdfaf469ed5.mod
GO_MODULE_FILES+=	golang.org/x/crypto/@v/v0.0.0-20200423211502-4bdfaf469ed5.zip
GO_MODULE_FILES+=	golang.org/x/net/@v/v0.0.0-20190404232315-eb5bcb51f2a3.mod
GO_MODULE_FILES+=	golang.org/x/net/@v/v0.0.0-20200421231249-e086a090c8fd.mod
GO_MODULE_FILES+=	golang.org/x/net/@v/v0.0.0-20200421231249-e086a090c8fd.zip
GO_MODULE_FILES+=	golang.org/x/sys/@v/v0.0.0-20190215142949-d0b11bdaac8a.mod
GO_MODULE_FILES+=	golang.org/x/sys/@v/v0.0.0-20190222072716-a9d3bda3a223.mod
GO_MODULE_FILES+=	golang.org/x/sys/@v/v0.0.0-20190412213103-97732733099d.mod
GO_MODULE_FILES+=	golang.org/x/sys/@v/v0.0.0-20190626150813-e07cf5db2756.mod
GO_MODULE_FILES+=	golang.org/x/sys/@v/v0.0.0-20191026070338-33540a1f6037.mod
GO_MODULE_FILES+=	golang.org/x/sys/@v/v0.0.0-20200116001909-b77594299b42.mod
GO_MODULE_FILES+=	golang.org/x/sys/@v/v0.0.0-20200223170610-d5e6a3e2c0ae.mod
GO_MODULE_FILES+=	golang.org/x/sys/@v/v0.0.0-20200323222414-85ca7c5b95cd.mod
GO_MODULE_FILES+=	golang.org/x/sys/@v/v0.0.0-20200420163511-1957bb5e6d1f.mod
GO_MODULE_FILES+=	golang.org/x/sys/@v/v0.0.0-20200420163511-1957bb5e6d1f.zip
GO_MODULE_FILES+=	golang.org/x/text/@v/v0.3.0.mod
GO_MODULE_FILES+=	golang.org/x/text/@v/v0.3.2.mod
GO_MODULE_FILES+=	golang.org/x/text/@v/v0.3.2.zip
GO_MODULE_FILES+=	golang.org/x/tools/@v/v0.0.0-20180917221912-90fa682c2a6e.mod
GO_MODULE_FILES+=	golang.org/x/tools/@v/v0.0.0-20180917221912-90fa682c2a6e.zip
GO_MODULE_FILES+=	golang.org/x/xerrors/@v/v0.0.0-20191204190536-9bdfabe68543.mod
GO_MODULE_FILES+=	golang.org/x/xerrors/@v/v0.0.0-20191204190536-9bdfabe68543.zip
GO_MODULE_FILES+=	google.golang.org/protobuf/@v/v0.0.0-20200109180630-ec00e32a8dfd.mod
GO_MODULE_FILES+=	google.golang.org/protobuf/@v/v0.0.0-20200221191635-4d8936d0db64.mod
GO_MODULE_FILES+=	google.golang.org/protobuf/@v/v0.0.0-20200228230310-ab0ca4ff8a60.mod
GO_MODULE_FILES+=	google.golang.org/protobuf/@v/v1.20.1-0.20200309200217-e05f789c0967.mod
GO_MODULE_FILES+=	google.golang.org/protobuf/@v/v1.21.0.mod
GO_MODULE_FILES+=	google.golang.org/protobuf/@v/v1.21.0.zip
GO_MODULE_FILES+=	gopkg.in/check.v1/@v/v0.0.0-20161208181325-20d25e280405.mod
GO_MODULE_FILES+=	gopkg.in/check.v1/@v/v1.0.0-20200227125254-8fa46927fb4f.mod
GO_MODULE_FILES+=	gopkg.in/check.v1/@v/v1.0.0-20200227125254-8fa46927fb4f.zip
GO_MODULE_FILES+=	gopkg.in/yaml.v2/@v/v2.2.2.mod
GO_MODULE_FILES+=	gopkg.in/yaml.v2/@v/v2.2.8.mod
GO_MODULE_FILES+=	gopkg.in/yaml.v2/@v/v2.2.8.zip
GO_MODULE_FILES+=	rsc.io/qr/@v/v0.2.0.mod
GO_MODULE_FILES+=	rsc.io/qr/@v/v0.2.0.zip

GO_BUILD_PATTERN=	.
CHECK_RELRO_SKIP+=	bin/gopass

INSTALLATION_DIRS+=	bin \
			share/bash-completion/completions \
			share/fish/vendor_completions.d \
			share/zsh/site-functions

post-build:
	cd ${WRKDIR}/.gopath && \
	./bin/gopass completion bash > ${WRKSRC}/completion.bash && \
	./bin/gopass completion fish > ${WRKSRC}/completion.fish && \
	./bin/gopass completion zsh  > ${WRKSRC}/completion.zsh

do-install:
	${INSTALL_PROGRAM} ${WRKDIR}/.gopath/bin/gopass ${DESTDIR}${PREFIX}/bin
	${INSTALL_DATA} ${WRKSRC}/completion.bash \
			${DESTDIR}${PREFIX}/share/bash-completion/completions/gopass
	${INSTALL_DATA} ${WRKSRC}/completion.fish \
			${DESTDIR}${PREFIX}/share/fish/vendor_completions.d/gopass.fish
	${INSTALL_DATA} ${WRKSRC}/completion.zsh \
			${DESTDIR}${PREFIX}/share/zsh/site-functions/_gopass

.include "../../lang/go/go-module.mk"
.include "../../mk/bsd.pkg.mk"

$NetBSD$
--- querysrv.go	2016-04-30 04:53:42.000000000 -0400
+++ querysrv.go	2016-06-01 21:36:11.000000000 -0400
@@ -329,10 +329,12 @@
 		}
 
 		ip := net.ParseIP(host)
-		if len(ip) == 0 || ip.IsUnspecified() {
-			uri.Host = net.JoinHostPort(remote.String(), port)
+		if host == "" || ip.IsUnspecified() {
+			host = remote.String()
 		}
 
+		uri.Host = net.JoinHostPort(host, port)
+
 		if err := s.updateAddress(ctx, tx, deviceID, uri.String()); err != nil {
 			internalErr = err
 			return
